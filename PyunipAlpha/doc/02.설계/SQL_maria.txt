CREATE TABLE USERS(
  USER_NUM      VARCHAR(14)    NOT NULL PRIMARY KEY,
  USER_NM       VARCHAR(100) NOT NULL ,
  EMAIL         VARCHAR(100) 		  ,
  REG_DTM       VARCHAR(14),
  UPT_DTM       VARCHAR(14),
  ROLE          VARCHAR(10)     DEFAULT 'ROLE_USER',  
  CLIENT_ID     VARCHAR(64) NOT NULL,
  SOCIAL_NM     VARCHAR(7) ,
  REFRESH_TOKEN TEXT
  )DEFAULT CHARSET=utf8;
  
  CREATE TABLE ACSS_LOG(
   ACSS_LOG_NUM  INT  NOT NULL     PRIMARY KEY,
   ACSS_DTM       VARCHAR(14),
   USER_NUM      VARCHAR(14),   
   USER_NM       VARCHAR(100),
   ACSS_IP       VARCHAR(20),
   LOG           VARCHAR(100)
  )DEFAULT CHARSET=utf8;
  
  CREATE TABLE ACSS_FAIL_LOG(
    ACSS_FAIL_NUM  INT   NOT NULL    PRIMARY KEY,
    FAIL_DTM       VARCHAR(14),
    USER_NM       VARCHAR(100),
    ACSS_IP       VARCHAR(20),
    FAIL_ROUTE    VARCHAR(100)  
  )DEFAULT CHARSET=utf8;
  
  CREATE TABLE BOARD(
    BRD_NUM       VARCHAR(14)   NOT NULL     PRIMARY KEY,
    BRD_CTG       VARCHAR(1),
    BRD_DV        VARCHAR(1),
    TITLE         NVARCHAR(256),
    CONTENT       longtext,
    VIEW_CNT      INT(10),
    LIKE_CNT      INT(10),
    REG_USER_NUM  VARCHAR(14),
    REG_DTM       VARCHAR(14),
    REG_IP        VARCHAR(20),
    UPT_USER_NUM  VARCHAR(14),
    UPT_DTM       VARCHAR(14),
    UPT_IP        VARCHAR(20),
    TOP_NOTICE_YN VARCHAR(1)
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE BOARD ADD CONSTRAINT FK_USERS_TO_BOARD_1 FOREIGN KEY(
    REG_USER_NUM
  )
  REFERENCES USERS(
    USER_NUM
  )ON DELETE CASCADE;
  
  ALTER TABLE BOARD ADD CONSTRAINT FK_USERS_TO_BOARD_2 FOREIGN KEY(
    UPT_USER_NUM
  )
  REFERENCES USERS(
    USER_NUM
  );
  
  CREATE TABLE BOARD_LIKE(
    BRD_NUM       VARCHAR(14)    NOT NULL,
    USER_NUM      VARCHAR(14)    NOT NULL
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE BOARD_LIKE ADD CONSTRAINT PK_BOARD_LIKE PRIMARY KEY(
    BRD_NUM,USER_NUM
  );
  
  ALTER TABLE BOARD_LIKE ADD CONSTRAINT FK_BOARD_TO_LIKE_1 FOREIGN KEY(
    BRD_NUM
  ) REFERENCES BOARD(
    BRD_NUM
  )ON DELETE CASCADE;
  
  ALTER TABLE BOARD_LIKE ADD CONSTRAINT FK_USERS_TO_LIKE_2 FOREIGN KEY(
    USER_NUM
  )REFERENCES USERS(
    USER_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE BOARD_STUDY(
    BRD_NUM       VARCHAR(14)  NOT NULL      PRIMARY KEY,
    APY_SIZE      INT(3),
    PCD_WAY       INT(1),
    ED_DTM        VARCHAR(8),
    ST_DTM        VARCHAR(8),
    APPLY_ED_DTM  VARCHAR(8)
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE BOARD_STUDY ADD CONSTRAINT FK_BOARD_TO_STUDY_1 FOREIGN KEY(
    BRD_NUM
  )REFERENCES BOARD(
    BRD_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE RPY(
    BRD_NUM        VARCHAR(14)  NOT NULL,
    RPY_NUM        INT  NOT NULL,
    RE_RPY_NUM     INT  NOT NULL,
    CONTENT        NVARCHAR(2000),
    REG_USER_NUM   VARCHAR(14),
    REG_DTM        VARCHAR(14),
    REG_IP         VARCHAR(20) 
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE RPY ADD CONSTRAINT PK_RPY PRIMARY KEY (
  BRD_NUM,RPY_NUM,RE_RPY_NUM
  );
  
  ALTER TABLE RPY ADD CONSTRAINT FK_BOARD_TO_RPY_1 FOREIGN KEY (
  BRD_NUM
  )
  REFERENCES BOARD  (
    BRD_NUM
  )ON DELETE CASCADE;
  
  ALTER TABLE RPY ADD CONSTRAINT FK_USERS_TO_RPY_2 FOREIGN KEY(
  REG_USER_NUM
  )
  REFERENCES USERS(
    USER_NUM
  )ON DELETE CASCADE;
  
  
  
  CREATE TABLE FILES(
    FILE_NUM      INT   NOT NULL    PRIMARY KEY,
    BRD_NUM       VARCHAR(14),
    ORIGIN_NAME   NVARCHAR(512),
    FILE_NAME     VARCHAR(100),
    FILE_SIZE     INT,
    FANCY_SIZE    VARCHAR(10),
    DOWN_NUM      INT,
    REG_USER_NUM  VARCHAR(14),
    REG_DTM       VARCHAR(14),
    REG_USER_IP   VARCHAR(20)
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE FILES ADD CONSTRAINT FK_BOARD_TO_FILES_1 FOREIGN KEY (
  BRD_NUM
  )
  REFERENCES BOARD (
    BRD_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE UNIV_INFO (
    UNIV_NUM     INT   NOT NULL      PRIMARY KEY,
    UNIV_NAME    VARCHAR(200),
    ADDR         VARCHAR(500),
    URL          VARCHAR(100),
    PHONE        VARCHAR(30),
    REG_YY       VARCHAR(4),
    APY_ST_DTM   VARCHAR(14),
    APY_ED_DTM   VARCHAR(14),
    APY_NOTE     VARCHAR(200),
    SLT_DATE     VARCHAR(45),
    SLT_NOTE     VARCHAR(200),
    SUC_APY_DTM  VARCHAR(200),
    SUC_APY_NOTE VARCHAR(200),
    DOC_SUB_DTM  VARCHAR(48),
    DOC_SUB_NOTE VARCHAR(200),
    INTV_DTM     VARCHAR(200),
    INTV_NOTE    VARCHAR(200), 
    LOGO         VARCHAR(100)
  )DEFAULT CHARSET=utf8;
  
  CREATE TABLE TRANS_INFO(
    UNIV_NUM       INT(3),
    TRANS_NUM     INT,
    SERIES       VARCHAR(1),
    DEPT_NM       VARCHAR(500),
    MAJOR_NM      VARCHAR(500),
    REG_YY        VARCHAR(4),
    RECRU_SIZE    INT(4),
    APY_SIZE      INT,
    COMPETITION   VARCHAR(10),
    SLT_WAY        VARCHAR(50)       
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE TRANS_INFO ADD CONSTRAINT PK_TRANS_INFO PRIMARY KEY (
  UNIV_NUM,TRANS_NUM
  );
  
  ALTER TABLE TRANS_INFO ADD CONSTRAINT FK_UNIV_INFO_TO_TRANS_INFO_1 FOREIGN KEY (
  UNIV_NUM
  )
  REFERENCES UNIV_INFO  (
    UNIV_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE SLT_INFO(
    SLT_NUM      INT(1) NOT NULL,
    UNIV_NUM       INT(3) NOT NULL,
    OPEN_YN        VARCHAR(1), 
    SLT_WAY        longtext,
    APY_QUAL      VARCHAR(10)
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE SLT_INFO ADD CONSTRAINT PK_SLT_INFO PRIMARY KEY(
    SLT_NUM
  );
  
  ALTER TABLE SLT_INFO ADD CONSTRAINT FK_UNIV_INFO_TO_SLT_1 FOREIGN KEY(
    UNIV_NUM
  )
  REFERENCES UNIV_INFO(
    UNIV_NUM
  )ON DELETE CASCADE;
  
  
  CREATE TABLE SLT_DETAIL_INFO(
    SLT_NUM      INT(1)		NOT NULL,
    SLT_DETAIL_NUM      INT(1)	NOT NULL,
    SLT_STEP      VARCHAR(50),
    ENG_PC        VARCHAR(10),
    MATH_PC       VARCHAR(10),
    MAJOR_PC      VARCHAR(10),
    PREV_GRADE    VARCHAR(10),
    INTV_PC       VARCHAR(10),
    RECOG_ENG_PC VARCHAR(10),
    WHATEVER      VARCHAR(10),
    WHATEVER_NOTE VARCHAR(200)   
  )DEFAULT CHARSET=utf8;
  
  ALTER TABLE SLT_DETAIL_INFO ADD CONSTRAINT PK_SLT_DETAIL_INFO PRIMARY KEY(
    SLT_DETAIL_NUM ,SLT_NUM
  );
  
  ALTER TABLE SLT_DETAIL_INFO ADD CONSTRAINT FK_SLT_INFO_TO_SLT_DETAIL_1 FOREIGN KEY(
    SLT_NUM
  )
  REFERENCES SLT_INFO(
    SLT_NUM
  )ON DELETE CASCADE;
  
CREATE TABLE BOARD_SUC (
	BRD_NUM       VARCHAR(14)        PRIMARY KEY,
	SUC_UNIV	   VARCHAR(200),
	SUC_YY        VARCHAR(10) 
)DEFAULT CHARSET=utf8;

ALTER TABLE BOARD_SUC ADD CONSTRAINT FK_BOARD_TO_BOARD_SUC_1 FOREIGN KEY(
	BRD_NUM
)
REFERENCES BOARD(
	BRD_NUM
)ON DELETE CASCADE;
  

CREATE TABLE ERROR_LOG(
	ERROR_NUM INT	NOT NULL,
	ERROR_TIME	VARCHAR(14),
	ERROR_URL 	VARCHAR(200),
	ERROR       longtext,
	USER_NUM    VARCHAR(14)
)DEFAULT CHARSET=utf8;

ALTER TABLE ERROR_LOG ADD CONSTRAINT PK_ERROR_LOG	PRIMARY KEY(
	ERROR_NUM
);