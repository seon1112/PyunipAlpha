CREATE TABLE USERS(
  USER_NUM      NUMBER NOT NULL PRIMARY KEY,
  USER_NM       VARCHAR2(100) NOT NULL ,
  EMAIL         VARCHAR2(50)    NOT NULL,
  PASSWORD      VARCHAR2(100)    NOT NULL,
  REG_DTM       VARCHAR2(14),
  ROLE          VARCHAR2(5)     DEFAULT 'USER'  
  );
  
  CREATE TABLE ACSS_LOG(
   ACSS_LOG_NUM  NUMBER  NOT NULL     PRIMARY KEY,
   ACSS_DTM       VARCHAR2(14),
   USER_NUM       VARCHAR2(100),
   EMAIL         VARCHAR2(50),
   ACSS_IP       VARCHAR2(20)
  );
  
  CREATE TABLE ACSS_FAIL_LOG(
    ACSS_FAIL_NUM  NUMBER   NOT NULL    PRIMARY KEY,
    FAIL_DTM       VARCHAR2(14),
    USER_NUM      NUMBER,
    EMAIL         VARCHAR2(50),
    ACSS_IP       VARCHAR2(20)  
  );
  
  CREATE TABLE BOARD(
    BRD_NUM       NUMBER   NOT NULL     PRIMARY KEY,
    BRD_CTG       VARCHAR2(1),
    BRD_DV        VARCHAR2(1),
    TITLE         NVARCHAR2(256),
    CONTENT       NCLOB,
    VIEW_CNT      NUMBER(10),
    LIKE_CNT      NUMBER(10),
    REG_USER_NUM  NUMBER,
    REG_DTM       VARCHAR2(14),
    REG_IP        VARCHAR2(20),
    UPT_USER_NUM  NUMBER,
    UPT_DTM       VARCHAR2(14),
    UPT_IP        VARCHAR2(20),
    TOP_NOTICE_YN VARCHAR2(1)
  );
  ALTER TABLE BOARD ADD CONSTRAINT FK_USERS_TO_BOARD_1 FOREIGN KEY(
    REG_USER_NUM
  )
  REFERENCES USERS(
    USER_NUM
  )ON DELETE CASCADE;
  
  ALTER TABLE BOARD ADD CONSTRAINT FK_USERS_TO_BOARD_2 FOREIGN KEY(
    UPT_USER_NUM
  )
  REFERENCES USERS(
    USER_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE BOARD_LIKE(
    BRD_NUM       NUMBER    NOT NULL,
    USER_NUM      NUMBER    NOT NULL
  );
  
  ALTER TABLE BOARD_LIKE ADD CONSTRAINT PK_BOARD_LIKE PRIMARY KEY(
    BRD_NUM,USER_NUM
  );
  
  ALTER TABLE BOARD_LIKE ADD CONSTRAINT FK_BOARD_TO_LIKE_1 FOREIGN KEY(
    BRD_NUM
  ) REFERENCES BOARD(
    BRD_NUM
  )ON DELETE CASCADE;
  
  ALTER TABLE BOARD_LIKE ADD CONSTRAINT FK_USERS_TO_LIKE_2 FOREIGN KEY(
    USER_NUM
  )REFERENCES USERS(
    USER_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE BOARD_STUDY(
    BRD_NUM       NUMBER  NOT NULL      PRIMARY KEY,
    APY_SIZE      NUMBER(3),
    PCD_WAY       NUMBER(1),
    ED_DTM        VARCHAR2(8),
    ST_DTM        VARCHAR2(8),
    APPLY_ED_DTM  VARCHAR2(8)
  );
  
  ALTER TABLE BOARD_STUDY ADD CONSTRAINT FK_BOARD_TO_STUDY_1 FOREIGN KEY(
    BRD_NUM
  )REFERENCES BOARD(
    BRD_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE RPY(
    BRD_NUM        NUMBER  NOT NULL,
    RPY_NUM        NUMBER  NOT NULL,
    RE_RPY_NUM     NUMBER  NOT NULL,
    CONTENT        NVARCHAR2(2000),
    REG_USER_NUM   NUMBER,
    REG_DTM        VARCHAR2(14),
    REG_IP         VARCHAR2(20) 
  );
  
  ALTER TABLE RPY ADD CONSTRAINT PK_RPY PRIMARY KEY (
  BRD_NUM,RPY_NUM,RE_RPY_NUM
  );
  
  ALTER TABLE RPY ADD CONSTRAINT FK_BOARD_TO_RPY_1 FOREIGN KEY (
  BRD_NUM
  )
  REFERENCES BOARD  (
    BRD_NUM
  )ON DELETE CASCADE;
  
  
  CREATE TABLE FILES(
    FILE_NUM      NUMBER   NOT NULL    PRIMARY KEY,
    BRD_NUM       NUMBER,
    ORIGIN_NAME NVARCHAR2(512),
    FILE_NAME     VARCHAR2(100),
    FILE_SIZE     NUMBER,
    FANCY_SIZE    NUMBER,
    DOWN_NUM      NUMBER,
    REG_USER_NUM NUMBER,
    REG_DTM       VARCHAR2(14),
    REG_USER_IP   VARCHAR2(20)
  );
  
  ALTER TABLE FILES ADD CONSTRAINT FK_BOARD_TO_FILES_1 FOREIGN KEY (
  BRD_NUM
  )
  REFERENCES BOARD (
    BRD_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE UNIV_INFO (
    UNIV_NUM     NUMBER   NOT NULL      PRIMARY KEY,
    UNIV_NAME    VARCHAR2(200),
    ADDR         VARCHAR2(500),
    URL          VARCHAR2(100),
    PHONE        VARCHAR2(30),
    REG_YY       VARCHAR2(4),
    APY_ST_DTM   VARCHAR2(14),
    APY_ED_DTM   VARCHAR2(14),
    APY_NOTE     VARCHAR2(200),
    SLT_DATE     VARCHAR2(45),
    SLT_NOTE     VARCHAR2(200),
    SUC_APY_DTM  VARCHAR2(200),
    SUC_APY_NOTE VARCHAR2(200),
    DOC_SUB_DTM  VARCHAR2(48),
    DOC_SUB_NOTE VARCHAR2(200),
    INTV_DTM     VARCHAR2(200),
    INTV_NOTE    VARCHAR2(200), 
    LOGO         VARCHAR2(100)
  );
  
  CREATE TABLE TRANS_INFO(
    UNIV_NUM       NUMBER(3),
    TRANS_NUM     NUMBER,
    SERIES       VARCHAR2(1),
    DEPT_NM       VARCHAR2(500),
    MAJOR_NM      VARCHAR2(500),
    REG_YY        VARCHAR2(4),
    RECRU_SIZE    NUMBER(4),
    APY_SIZE      NUMBER,
    COMPETITION   VARCHAR2(10),
    SLT_WAY        VARCHAR2(50)       
  );
  
  ALTER TABLE TRANS_INFO ADD CONSTRAINT PK_TRANS_INFO PRIMARY KEY (
  UNIV_NUM,TRANS_NUM
  );
  
  ALTER TABLE TRANS_INFO ADD CONSTRAINT FK_UNIV_INFO_TO_TRANS_INFO_1 FOREIGN KEY (
  UNIV_NUM
  )
  REFERENCES UNIV_INFO  (
    UNIV_NUM
  )ON DELETE CASCADE;
  
  CREATE TABLE SLT_INFO(
    SLT_NUM      NUMBER(1) NOT NULL,
    UNIV_NUM       NUMBER(3) NOT NULL,
    OPEN_YN        VARCHAR2(1), 
    SLT_WAY    VARCHAR2(200),
    APY_QUAL      VARCHAR2(10)
  );
  
  ALTER TABLE SLT_INFO ADD CONSTRAINT PK_SLT_INFO PRIMARY KEY(
    SLT_NUM
  );
  
  ALTER TABLE SLT_INFO ADD CONSTRAINT FK_UNIV_INFO_TO_SLT_1 FOREIGN KEY(
    UNIV_NUM
  )
  REFERENCES UNIV_INFO(
    UNIV_NUM
  )ON DELETE CASCADE;
  
  
  CREATE TABLE SLT_DETAIL_INFO(
    SLT_NUM      NUMBER(1)		NOT NULL,
    SLT_DETAIL_NUM      NUMBER(1)	NOT NULL,
    SLT_STEP      VARCHAR2(50),
    ENG_PC        NUMBER(2),
    MATH_PC      NUMBER(2),
    MAJOR_PC      NUMBER(2),
    PREV_GRADE    NUMBER(2),
    INTV_PC       NUMBER(2),
    RECOG_ENG_PC  NUMBER(2),
    WHATEVER      NUMBER(2),
    WHATEVER_NOTE VARCHAR2(200)   
  );
  
  ALTER TABLE SLT_DETAIL_INFO ADD CONSTRAINT PK_SLT_DETAIL_INFO PRIMARY KEY(
    SLT_DETAIL_NUM ,SLT_NUM
  );
  
  ALTER TABLE SLT_DETAIL_INFO ADD CONSTRAINT FK_SLT_INFO_TO_SLT_DETAIL_1 FOREIGN KEY(
    SLT_NUM
  )
  REFERENCES SLT_INFO(
    SLT_NUM
  )ON DELETE CASCADE;
  
CREATE TABLE BOARD_SUC (
	BRD_NUM       NUMBER        PRIMARY KEY,
	SUC_UNIV	   VARCHAR2(200),
	SUC_YY        VARCHAR2(4) 
);

ALTER TABLE BOARD_SUC ADD CONSTRAINT FK_BOARD_TO_BOARD_SUC_1 FOREIGN KEY(
	BRD_NUM
)
REFERENCES BOARD(
	BRD_NUM
)ON DELETE CASCADE;
  
